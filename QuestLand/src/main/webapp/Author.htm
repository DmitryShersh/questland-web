<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" style="height: 100%; margin:0px; padding:0px;">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>QLand</title>
	<link rel="stylesheet" type="text/css" href="/css/author.css" media="all" />
	<script src="/js/jquery-1.11.2.min.js"></script>
	<script src="/js/utils.js"></script>
	<!--[if IE]>
	<style type="text/css" media="all">.borderitem {border-style: solid;}</style>
	<![endif]-->
</head>

<body bgcolor="#2659ff" style="margin:0px; padding:0px;">
	<table style="width: 100%; height: 30%; text-align: center; align: center;">
		<tr>
			<td style="width: 15%;">
			</td>
			<td style="width: 70%; height: 40px;">
				<table style="width: 100%; height: 100%; text-align: center; padding-top: 1%;">
					<tr style="height: 100%;">
						<td style="position: relative; width: 20%; text-align: center; vertical-align: middle;">
							<div class="main_menu_block">
								<div class="txt_main_menu">
									<a href="/Main.htm">Главная</a>
								</div>
							</div>
						</td>
						<td style="position: relative; width: 20%; text-align: center; vertical-align: middle;">
							<div class="main_menu_block">
								<div class="txt_main_menu">
									Квесты
								</div>
							</div>
						</td>
						<td style="position: relative; width: 22%; text-align: center; vertical-align: middle;">
							<div class="main_menu_block">
								<div class="txt_main_menu">
									<a href="/Popular.htm">Популярное</a>
								</div>
							</div>
						</td>
						<td style="position: relative; width: 18%; text-align: center; vertical-align: middle;">
							<div class="main_menu_block">
								<div class="txt_main_menu">
									<a href="/Authors.htm">Авторы</a>
								</div>
							</div>
						</td>
						<td style="position: relative; width: 20%; text-align: center; vertical-align: middle;">
							<div class="main_menu_block">
								<div class="txt_main_menu">
									<a href="/Rules.htm">Правила</a>
								</div>
							</div>
						</td>
					</tr>
				</table>
			</td>
			<td style="width: 15%;">
			</td>
		</tr>
		<tr style="height: 0%;">
			<td rowspan="2" style="width: 15%;  vertical-align: top;">
				<div class="Txt_qland">
					Q u e s t L a n d
				</div>
			</td>
			<td style="width: 70%; height: 0%;">
				<div class="auth_big_block">
					<table style="width: 100%; text-align: center; margin-top: 2%; height: 100%;">
						<tr>
							<td rowspan="2" style="width: 45%; height: 100%; text-align: center;">
								<img id="Ava" src="images/author.png" alt="author pict" class="auth_big_img"/>
								<div id="downloadAva" style="width: 70%; background: #265aff; padding-top: 5%; padding-bottom: 5%; margin-left: 15%; border-radius: 20px; display: none;">
									<form id="uploadForm" action="/upload" method="post" enctype="multipart/form-data">
										<input type="file" name="load_img"> <br>
										<input type="submit" value="Сохранить" style="margin-top: 5%;">
									</form>
								</div>
							</td>
							<td style="height: 20%; width: 55%;">
								<div id="authorLogin" class="Txt_auth_name">
									Rozettka
								</div>
							</td>
						</tr>
						<tr>
							<td style="text-align: left; vertical-align: top; margin-left: 5%; padding-top: 3%;">
								<div id="authorDescription" class="Txt_auth_about">
									Всем привет! Я автор начинающий, так что прошу больно тапками не кидаться. Пишу всего пару дней, ми-ми-ми^^
									<br> <br> Создано квестов: 10.
								</div>
							</td>
						</tr>
					</table>
				</div>
			</td>
			<td style="width: 15%; text-align: center; vertical-align: top;">
				<table style="height: 510px; width: 80%; margin-left: 10%;">
					<tr>
						<td style="height: 22%; width: 100%; text-align: center;">
							<div id="authorImgBox" style="display:none">
								<img id="authorImg" src="images/author.png" alt="author pict" style="position: relative; max-height: 100px; max-width: 100px; height: auto; width: auto;"/>
							</div>
						</td>
					</tr>
					<tr>
						<td style="height: 10%;">
							<div id="authorName" style="font-family: 'Hobo Std', Arial, Helvetica, sans-serif; font-size: 200%;	text-align: center;	color: #fff; text-shadow: 5px 2px 3px black;
										line-height: 100%; padding-bottom: 2px; padding-top: 1px; display: none">
								Rozettka
							</div>
						</td>
					</tr>
					<tr>
						<td style="height: 17%;">
							<div id="crQuest" class="auth_menu_block" style="display:none">
								<div class="txt_auth_menu">
									Создать <br> квест
								</div>
							</div>
						</td>
					</tr>
					<tr>
						<td style="height: 17%;">
							<div id="logoutUser" onclick="exitUser()" class="auth_menu_block" style="display:none">
								<div class="txt_auth_menu" style="padding-top: 15%;">
									Выйти
								</div>
							</div>
						</td>
					</tr>
					<tr>
						<td style="height: 17%;">
							<div class="auth_menu_block" style="display:none">
								<div class="txt_auth_menu">
									Начать <br> квест
								</div>
							</div>
						</td>
					</tr>
					<tr>
						<td style="height: 17%;">
							<div class="auth_menu_block" style="display:none">
								<div class="txt_auth_menu">
									Открыть <br> отзывы
								</div>
							</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	<tr style="height: 0%"><td>
	<table id="questsTable" style="width: 100%; padding-top: 30px; padding-bottom: 30px; vertical-align: top;">
		<tr style="height: 270px;">
			<td style="width: 100%; height: 270px;">
				<div class="quest_block">
					<table class="sto_sto">
						<tr class="sto_sto">
							<td style="width: 6%;">
								<div style="background-color: #00b200;" class="quest_univ">
									<div class="Txt_univ">
										Ф э н т е з и
									</div>
								</div>
							</td>
							<td style="width: 30%; text-align: center;">
								<img class="main_pict" src="images/img_quest1.png" alt="quest image"/>
							</td>
							<td>
								<div class="Txt_quest">
									Квест1
								</div>
								<br>
								<div class="Txt_quest_author">
									Автор: Некто1<br />Вселенная: Фэнтези<br>Категория: Ориджиналы<br>Жанр: Повседневность, Юмор, Романтика<br>Описание: Путешествие по стране эльфов.
									</div>
							</td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
		<tr style="height: 22%;">
			<td style="width: 100%; height: 270px;">
				<div class="quest_block">
					<table class="sto_sto">
						<tr class="sto_sto">
							<td style="width: 6%;">
								<div style="background-color: #0000b2;" class="quest_univ">
									<div class="Txt_univ">
										Ф а н т а с т и к а
									</div>
								</div>
							</td>
							<td style="width: 30%; text-align: center;">
								<img class="main_pict" src="images/img_quest2.png" alt="quest image"/>
							</td>
							<td>
								<div class="Txt_quest">
									Квест1
								</div>
								<br>
								<div class="Txt_quest_author">
									Автор: Некто1<br />Вселенная: Фэнтези<br>Категория: Ориджиналы<br>Жанр: Повседневность, Юмор, Романтика<br>Описание: Путешествие по стране эльфов.
									</div>
							</td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
		<tr style="height: 22%;">
			<td style="width: 100%; height: 270px;">
				<div class="quest_block">
					<table class="sto_sto">
						<tr class="sto_sto">
							<td style="width: 6%;">
								<div style="background-color: #ff4d4d;" class="quest_univ">
									<div class="Txt_univ">
										Р е а л и т и
									</div>
								</div>
							</td>
							<td style="width: 30%; text-align: center;">
								<img class="main_pict" src="images/img_quest3.png" alt="quest image"/>
							</td>
							<td>
								<div class="Txt_quest">
									Квест1
								</div>
								<br>
								<div class="Txt_quest_author">
									Автор: Некто1<br />Вселенная: Фэнтези<br>Категория: Ориджиналы<br>Жанр: Повседневность, Юмор, Романтика<br>Описание: Путешествие по стране эльфов.
									</div>
							</td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
		<tr style="height: 22%;">
			<td style="width: 100%; height: 270px;">
				<div class="quest_block">
					<table class="sto_sto">
						<tr class="sto_sto">
							<td style="width: 6%;">
								<div style="background-color: #a64dff;" class="quest_univ">
									<div class="Txt_univ">
										И н о е
									</div>
								</div>
							</td>
							<td style="width: 30%; text-align: center;">
								<img class="main_pict" src="images/img_quest4.png" alt="quest image"/>
							</td>
							<td>
								<div class="Txt_quest">
									Квест1
								</div>
								<br>
								<div class="Txt_quest_author">
									Автор: Некто1<br />Вселенная: Фэнтези<br>Категория: Ориджиналы<br>Жанр: Повседневность, Юмор, Романтика<br>Описание: Путешествие по стране эльфов.
									</div>
							</td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
	</table>
	</td> </tr>
	</table>

<script>
	function initAuthor(author) {
		document.getElementById("Ava")
				.setAttribute("src", "/images/"
					+ (author.avatarURL
					? "author/" + author.avatarURL
					: "none.png"));
		document.getElementById("authorLogin").innerHTML = author.login;
		document.getElementById("authorDescription").innerHTML
				= (("description" in author) ? (author.description) : "") + "<br> <br>"
		+ "Создано квестов: " + author.quests.length;

		$("#questsTable").empty();
		for (var i = 0; i < author.quests.length; i++) {
			var quest = author.quests[i];
			addQuestChild(quest);
		}
	}

	(function init() {
		$("#uploadForm").submit(function(eventObj) {
			$('<input />')
				.attr('id', 'hiddenInputID')
				.attr('type', 'hidden')
				.attr('name', "authorId")
				.attr('value', url2id())
				.appendTo('#uploadForm');
			console.log(document.getElementById("hiddenInputID").value);
			return true;
		});

		$.ajax({
			type: "POST",
			url: '/author',
			dataType: 'json',
			data: { type: 'id', value: url2id() }
		}).done(function(author) {
			//console.log(author);
			initAuthor(author);
			validateLogin({"avatar": true});
		});
	})();
</script>

</body>
</html>